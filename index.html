<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
  <title>SCREAM INTO THE VOID</title>
  <meta name="description" content="SCREAM INTO THE VOID"/>
  <meta name="keywords" content="SCREAM INTO THE VOID"/>

  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">

  <script type="text/javascript">
// autosize.min.js
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e||self).autosize=t()}(this,function(){var e=new Map;function t(t){var o=e.get(t);o&&o.destroy()}function o(t){var o=e.get(t);o&&o.update()}var r=null;return"undefined"==typeof window?((r=function(e){return e}).destroy=function(e){return e},r.update=function(e){return e}):((r=function(t,o){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return function(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!e.has(t)){var o,r=null,n=window.getComputedStyle(t),i=(o=t.value,function(){s({testForHeightReduction:""===o||!t.value.startsWith(o),restoreTextAlign:null}),o=t.value}),l=function(o){t.removeEventListener("autosize:destroy",l),t.removeEventListener("autosize:update",a),t.removeEventListener("input",i),window.removeEventListener("resize",a),Object.keys(o).forEach(function(e){return t.style[e]=o[e]}),e.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,textAlign:t.style.textAlign,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",l),t.addEventListener("autosize:update",a),t.addEventListener("input",i),window.addEventListener("resize",a),t.style.overflowX="hidden",t.style.wordWrap="break-word",e.set(t,{destroy:l,update:a}),a()}function s(e){var o,i,l=e.restoreTextAlign,a=void 0===l?null:l,d=e.testForHeightReduction,u=void 0===d||d,f=n.overflowY;if(0!==t.scrollHeight&&("vertical"===n.resize?t.style.resize="none":"both"===n.resize&&(t.style.resize="horizontal"),u&&(o=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push([e.parentNode,e.parentNode.scrollTop]),e=e.parentNode;return function(){return t.forEach(function(e){var t=e[0],o=e[1];t.style.scrollBehavior="auto",t.scrollTop=o,t.style.scrollBehavior=null})}}(t),t.style.height=""),i="content-box"===n.boxSizing?t.scrollHeight-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)):t.scrollHeight+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),"none"!==n.maxHeight&&i>parseFloat(n.maxHeight)?("hidden"===n.overflowY&&(t.style.overflow="scroll"),i=parseFloat(n.maxHeight)):"hidden"!==n.overflowY&&(t.style.overflow="hidden"),t.style.height=i+"px",a&&(t.style.textAlign=a),o&&o(),r!==i&&(t.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),r=i),f!==n.overflow&&!a)){var c=n.textAlign;"hidden"===n.overflow&&(t.style.textAlign="start"===c?"end":"start"),s({restoreTextAlign:c,testForHeightReduction:!0})}}function a(){s({testForHeightReduction:!0,restoreTextAlign:null})}}(t)}),t}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],t),e},r.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e}),r});
  </script>
  <script type="text/javascript">
(function(factory){if(typeof module==='object'&&typeof module.exports==='object'){module.exports=factory()}else{factory()}}(function(){var ua=window.navigator.userAgent.toLowerCase();var html=document.getElementsByTagName('html')[0];window.Platform={isHD:window.devicePixelRatio>1,isiPad:ua.match(/ipad/i)!==null,isNexus7:ua.match(/Nexus 7/gi)!==null,isMobile:ua.match(/Android|webOS|iPhone|iPod|BlackBerry|IEMobile/i)!==null&&ua.match(/Mobile/i)!==null,isiPhone:ua.match(/iphone/i)!==null,isAndroid:ua.match(/android/i)!==null,isS3:ua.match(/gt\-i9300/i)!==null,isS4:ua.match(/(gt\-i95)|(sph\-l720)/i)!==null,isS5:ua.match(/sm\-g900/i)!==null,isIE:/(msie|trident)/i.test(navigator.userAgent),isIE11:ua.match(/Trident\/7\.0/i)!==null,isChrome:ua.match(/Chrome/gi)!==null,isFirefox:ua.match(/firefox/gi)!==null,hasTouch:('ontouchstart' in window),supportsSvg:!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect};window.Platform.isAndroidPad=Platform.isAndroid&&!Platform.isMobile;window.Platform.isTablet=Platform.isiPad||Platform.isAndroidPad;window.Platform.isDesktop=!(Platform.isMobile||Platform.isTablet);window.Platform.isIOS=Platform.isiPad||Platform.isiPhone;window.Platform.isSafari=Platform.isDesktop&&(!Platform.isIE)&&(!Platform.isChrome)&&(!Platform.isFirefox);if(Platform.isHD)html.classList.add('hd');if(Platform.isiPad)html.classList.add('ipad');if(Platform.isNexus7)html.classList.add('nexus7');if(Platform.isMobile)html.classList.add('mobile');if(Platform.isiPhone)html.classList.add('iphone');if(Platform.isAndroid)html.classList.add('android');if(Platform.isS3)html.classList.add('s3');if(Platform.isS4)html.classList.add('s4');if(Platform.isS5)html.classList.add('s5');if(Platform.isIE)html.classList.add('ie');if(Platform.isIE11)html.classList.add('ie11');if(Platform.isChrome)html.classList.add('chrome');if(Platform.isFirefox)html.classList.add('firefox');if(Platform.hasTouch)html.classList.add('has-touch');if(!Platform.hasTouch)html.classList.add('no-touch');if(Platform.supportsSvg)html.classList.add('support-svg');if(Platform.isAndroidPad)html.classList.add('android-pad');if(Platform.isTablet)html.classList.add('tablet');if(Platform.isDesktop)html.classList.add('desktop');if(Platform.isIOS)html.classList.add('ios');if(Platform.isSafari)html.classList.add('safari');return window.Platform}))
  </script>

</head>
<body frame="start">
<div class="img-tiles">
  <i class="tiles"></i>
</div>
<div class="img-tiles2">
  <i class="tiles2"></i>
</div>
  <div class="img-bg">
    <i class="bg"></i>
  </div>
<div class="wrapper">
  <div class="img-scream">
    <i class="scream"></i>
  </div>
  <div class="type-wrapper">
    <textarea type="text" class="type" placeholder="[type your feelings here]" onclick="document.execCommand('selectAll', false, null)" onpaste="window.trimInputs()"></textarea>
  </div>
  <div class="glad">Glad nobody read <em>that!</em></div>
  <div class="again"><span class="click">click</span><span class="tap">tap</span> <span class="here">here</span> to scream again</div>
  <div class="img-btn">
    <p class="btn-txt">When youâ€™re done hit the button</p>
    <i class="btn"></i>
    <i class="btn-hover"></i>
  </div>
</div>
  <div class="links">
    <a href="https://github.com/hctilg/screamintothevoid" target="_blank">GitHub</a>
  </div>

<audio class="audio1">
  <source src="assets/audio/VOID_1.sub.01.mp3" type="audio/mpeg"/>
</audio>
<audio class="audio2">
  <source src="assets/audio/VOID_2.sub.01.mp3" type="audio/mpeg"/>
</audio>
<audio class="audio3">
  <source src="assets/audio/VOID_3.sub.01.mp3" type="audio/mpeg"/>
</audio>
<audio class="audio4">
  <source src="assets/audio/VOID_4.sub.01.mp3" type="audio/mpeg"/>
</audio>

<script>
var input = document.querySelector('.type');
var isScream = false;

window.trimInputs = ev => {
  setTimeout(() => {
    input.value = input.value.replace(/\r\n|\r|\n/g, '');
    if (input.value.length >= 280) {
      input.value = input.value.substr(0, 280);
      autosize.update(input);
    }
  }, 10);
}

document.addEventListener('DOMContentLoaded', ev => { 
  autosize(input);
  var ticker = setInterval(() => autosize.update(input), 11);
  setTimeout(() => clearInterval(ticker), 3000);
});

window.addEventListener('resize', ev => autosize.update(input));

function playAudio() {
  var rand = parseInt(Math.random() * 4);
  document.querySelector('.audio' + (rand + 1)).play();

  document.querySelector('.type-wrapper').classList.add('block');

  setTimeout(function() {
    document.querySelector('[frame]').setAttribute('frame', 'end');
  }, 1000);
}

document.querySelector('.img-btn').addEventListener('click', function() {
  if (input.value.trim().length === 0 || isScream) return;
  isScream = true;
  playAudio();
});

document.querySelector('.here').addEventListener('click', function() {
  document.querySelector('[frame]').setAttribute('frame', 'start');
  input.value = '';
  document.querySelector('.type-wrapper').classList.remove('block');

  setTimeout(function() {
    isScream = false;
  }, 500);
});

input.addEventListener('keydown', function(e) {
  input.value = input.value.replace(/\r\n|\r|\n/g, '');
  if (e.keyCode === 13) {
    playAudio();
    e.preventDefault();
  }
});

input.addEventListener('keyup', function(e) {
  input.value = input.value.replace(/\r\n|\r|\n/g, '');
  if (input.value.length >= 280) {
    input.value = input.value.substr(0, 280);
    autosize.update(input);
  }
});


var settings = {
  maxLen: 280,
}

var keys = {
  'backspace': 8,
  'shift': 16,
  'ctrl': 17,
  'alt': 18,
  'delete': 46,
  // 'cmd':
  'leftArrow': 37,
  'upArrow': 38,
  'rightArrow': 39,
  'downArrow': 40,
}

var utils = {
  special: {},
  navigational: {},
  isSpecial: function (e) {
    return typeof this.special[e.keyCode] !== 'undefined';
  },
  isNavigational: function(e) {
    return typeof this.navigational[e.keyCode] !== 'undefined';
  }
}

utils.special[keys['backspace']] = true;
utils.special[keys['shift']] = true;
utils.special[keys['ctrl']] = true;
utils.special[keys['alt']] = true;
utils.special[keys['delete']] = true;

utils.navigational[keys['upArrow']] = true;
utils.navigational[keys['downArrow']] = true;
utils.navigational[keys['leftArrow']] = true;
utils.navigational[keys['rightArrow']] = true;

input.addEventListener('keydown', function(event) {
  // var len = event.target.innerText.trim().length;
  var len = event.target.value.length;
  var hasSelection = false;
  var selection = window.getSelection();
  var isSpecial = utils.isSpecial(event);
  var isNavigational = utils.isNavigational(event);
  
  if (selection) {
    hasSelection = !!selection.toString();
  }
  
  if (isSpecial || isNavigational) {
    return true;
  }
  
  if (len >= settings.maxLen && !hasSelection) {
    event.preventDefault();
    return false;
  }
});
</script>
</body>
</html>